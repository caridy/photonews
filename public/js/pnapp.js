/*
 * Copyright (c) 2013, Yahoo! Inc.  All rights reserved.
 * Copyrights licensed under the New BSD License.
 * See the accompanying LICENSE.txt file for terms.
 */

/*jslint nomen:true, browser:true*/
/*global DATA, YUI*/

// classes
import ControllerNews from 'controllers/news';
import ControllerPhotos from 'controllers/photos';

import HandlerNews from 'handlers/news';
import HandlerAbout from 'handlers/about';

import ModelNews from 'models/news';
import ModelPost from 'models/post';
import ModelPhotos from 'models/photos';
import ModelPhoto from 'models/photo';

import ViewAbout from 'views/about';
import ViewHome from 'views/home';
import ViewPhotos from 'views/photos';
import ViewNews from 'views/news';

import PN from 'pn';

PN.Controllers.register('news', ControllerNews);
PN.Controllers.register('photos', ControllerPhotos);

PN.Handlers.register('news', HandlerNews);
PN.Handlers.register('about', HandlerAbout);

PN.Models.register('news',   ModelNews);
PN.Models.register('post',   ModelPost);
PN.Models.register('photos', ModelPhotos);
PN.Models.register('photo',  ModelPhoto);

PN.Views.register('about',  ViewAbout);
PN.Views.register('home',   ViewHome);
PN.Views.register('news',   ViewNews);
PN.Views.register('photos', ViewPhotos);

import {App} from 'app';
import {Base} from 'base';

var PhotoNews = Base.create('photoNews', App, [], {

    // TODO
    // views config should not be generated by the server at all :)
    views: {
        home: {
            type: 'Views.HomeView',
            preserve: true
        },
        news: {
            type: 'Views.NewsView',
            preserve: true
        },
        photos: {
            type: 'Views.PhotosView',
            preserve: true
        },
        about: {
            type: 'Views.AboutView',
            preserve: true
        }
    },

    transitions: {
        navigate: 'fade',
        toChild: 'fade',
        toParent: 'fade'
    },

    initializer: function () {
        this.on('photosView:next', this.nextPhotos);
        this.on('photosView:prev', this.prevPhotos);
    },

    render: function (options) {
        var viewContainer,
            container;

        PhotoNews.superclass.render.apply(this, arguments);

        options = options || {};

        if (options.rendered) {
            return this;
        }

        container = this.get('container');
        viewContainer = this.get('viewContainer');

        // Setup initial view here if content is not prerendered on the
        // server

        return this;
    },

    nextPhotos: function () {
        var model;
        model = this.get('model');
        model.load();
    },
    prevPhotos: function () {
        var model;
        model = this.get('model');
        model.load();
    }

}, {

    ATTRS: {}

});

PN.PhotoNews = PhotoNews;
export default PhotoNews;
